<!DOCTYPE html>
<html lang="he">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>בית המקדש</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Bona+Nova&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://db.onlinewebfonts.com/c/1e5f9518cedc2205b9be575333531250?family=Digital-7"
        media="print" onload="this.media='all'">

    <style>
        :root {
            --main-color: #ff4500;
            --secondary-color: #bbb;
            --button-border-color: #fff;
            --button-text-color: #fff;
            --background-color: #1a1a1a;
            --text-color: #f0f0f0;
            --button-hover-color: #ff6347;
            --scrollbar-bg: #333;
            --scrollbar-thumb: #ff4500;
            --digit-height: 80px;
            --digit-width: 60px;
            --digit-font-size: 60px;
        }

        * {
            margin: 0;
            padding: 0;
            font-family: 'Bona Nova', serif;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            overflow-x: hidden;
        }

        ::-webkit-scrollbar {
            width: 12px;
        }

        ::-webkit-scrollbar-track {
            background: var(--scrollbar-bg);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--scrollbar-thumb);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #ff6347;
        }

        #home {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(68, 59, 55, 0.7)),
                url('בית המקדש.gif');
            background-size: cover;
            background-position: center;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
        }

        /* Adjust sections for fixed header */
        section {
            scroll-margin-top: 80px;
        }

        .fade-in {
            animation: fadeInAnimation ease 1.5s;
            animation-iteration-count: 1;
            animation-fill-mode: forwards;
        }

        #temple-counter {
            position: relative;
            z-index: 1;
        }

        .rounded-box {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }

        #temple-counter h2 {
            color: var(--main-color);
            font-size: 48px;
            margin-bottom: 20px;
            font-weight: 700;
            line-height: 1.2;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }

        .time-unit {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            flex-direction: row-reverse;
        }

        .unit {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 10px;
        }

        .unit-title {
            font-size: 24px;
            color: var(--secondary-color);
            margin-top: 6px;
        }

        .unit-value-container {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .unit-value {
            border: none;
            border-radius: 8px;
            background-color: rgba(142, 136, 136, 0.5);
            min-width: var(--digit-width);
            width: var(--digit-width);
            margin: 0 4px;
            height: var(--digit-height);
            box-sizing: border-box;
            overflow: hidden;
            position: relative;
        }

        .digit-reel {
            display: flex;
            flex-direction: column;
            transition: transform 1.2s cubic-bezier(0.2, 0.8, 0.2, 1);
            transform: translateY(calc(var(--digit, 0) * var(--digit-height) * -1));
        }

        .digit-reel>span {
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Digital-7', Arial, sans-serif;
            font-size: var(--digit-font-size);
            font-weight: 700;
            color: #fff;
            width: var(--digit-width);
            min-height: var(--digit-height);
            line-height: var(--digit-height);
            text-align: center;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
        }

        .colon {
            font-size: 24px;
            line-height: 40px;
            font-family: 'Digital-7', Arial, sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 40px;
            margin: 0 4px;
            position: relative;
            top: -15px;
            color: #fff;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
        }

        .action {
            font-size: 24px;
            color: var(--main-color);
            margin-top: 20px;
            text-transform: uppercase;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }

        .button-container {
            display: flex;
            gap: 20px;
            margin-top: 40px;
            justify-content: center;
        }

        .button-container button {
            border: 2px solid var(--button-border-color);
            background-color: transparent;
            color: var(--button-text-color);
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
        }

        .button-container button:hover {
            background-color: var(--background-color);
            color: var(--text-color);
        }

        .content-section {
            padding: 60px 20px;
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
            direction: rtl;
        }

        .content-section h3 {
            font-size: 32px;
            margin-bottom: 20px;
            color: var(--main-color);
        }

        .content-section p {
            font-size: 18px;
            line-height: 1.7;
            margin-bottom: 20px;
        }

        .content-section a {
            color: var(--main-color);
        }

        .example-code {
            background-color: #333;
            color: #fff;
            padding: 10px;
            border-radius: 8px;
            text-align: left;
            direction: ltr;
            margin: 10px 0;
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .copy-button {
            background: transparent;
            border: none;
            color: var(--main-color);
            cursor: pointer;
            padding: 5px;
            font-size: 18px;
            transition: color 0.3s;
        }

        .copy-button:hover {
            color: var(--button-hover-color);
        }

        .code-content {
            hyphens: auto;
        }

        .example-code pre {
            flex-grow: 1;
            margin: 0;
            margin-right: 10px;
            text-align: left;
            white-space: pre-wrap;
            word-break: break-word;
            font-family: 'Courier New', Courier, monospace;
        }

        /* Header & Navigation */
        #main-header {
            background: rgba(26, 26, 26, 0.9);
            backdrop-filter: blur(10px);
            position: fixed;
            width: 100%;
            top: 0;
            left: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            direction: rtl;
        }

        #main-header nav {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
        }

        .nav-logo {
            font-size: 24px;
            color: var(--main-color);
            text-decoration: none;
            font-weight: bold;
        }

        #main-header nav ul {
            list-style: none;
            display: flex;
            gap: 25px;
            align-items: center;
        }

        #main-header nav ul li a {
            color: var(--text-color);
            text-decoration: none;
            font-size: 18px;
            transition: color 0.3s, border-bottom-color 0.3s;
            padding-bottom: 5px;
            border-bottom: 2px solid transparent;
        }

        #main-header nav ul li a:hover,
        #main-header nav ul li a.active {
            color: var(--main-color);
            border-bottom-color: var(--main-color);
        }

        #main-header nav ul li a.nav-cta-button {
            background-color: transparent;
            border: 2px solid var(--main-color);
            color: var(--main-color);
            padding: 6px 16px;
            border-radius: 5px;
            font-weight: bold;
            line-height: 1.5;
        }

        #main-header nav ul li a.nav-cta-button:hover,
        #main-header nav ul li a.nav-cta-button.active {
            background-color: var(--main-color);
            color: var(--button-text-color);
            border-color: var(--main-color);
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--button-text-color);
            font-size: 24px;
            cursor: pointer;
        }

        .social-share {
            margin-top: 30px;
        }

        .social-share a {
            color: var(--secondary-color);
            font-size: 24px;
            margin: 0 10px;
            transition: color 0.3s;
        }

        .social-share a:hover {
            color: var(--main-color);
        }

        footer {
            text-align: center;
            padding: 20px;
            background-color: #111;
            color: var(--secondary-color);
            font-size: 14px;
        }

        .footer-link {
            color: var(--secondary-color);
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-link:hover {
            color: var(--main-color);
        }

        @keyframes fadeInAnimation {
            0% {
                opacity: 0;
                transform: translateY(20px);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            #temple-counter h2 {
                font-size: 36px;
            }

            :root {
                --digit-height: 60px;
                --digit-width: 45px;
                --digit-font-size: 45px;
            }

            .unit-title {
                font-size: 18px;
            }

            .colon {
                font-size: 20px;
                top: -10px;
            }

            .button-container {
                flex-direction: column;
                gap: 15px;
                margin-top: 30px;
            }

            #main-header nav ul {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background: rgba(26, 26, 26, 0.98);
                flex-direction: column;
                align-items: center;
                padding: 20px 0;
                gap: 20px;
            }

            #main-header nav ul li a.nav-cta-button {
                display: inline-block;
            }

            #main-header nav ul.active {
                display: flex;
            }

            .menu-toggle {
                display: block;
            }
        }

        @media (max-width: 600px) {
            .content-section p {
                font-size: 17px;
            }

            .content-section h3 {
                font-size: 22px;
            }
        }

        @media (max-width: 480px) {
            #home {
                padding: 0 15px;
            }

            #temple-counter h2 {
                font-size: 28px;
                margin-bottom: 15px;
            }

            :root {
                --digit-height: 50px;
                --digit-width: 35px;
                --digit-font-size: 35px;
            }

            .rounded-box {
                padding: 15px;
                backdrop-filter: blur(5px);
            }

            .unit-title {
                font-size: 16px;
            }

            .colon {
                font-size: 18px;
                top: -8px;
            }

            .content-section p {
                font-size: 16px;
            }

            .content-section h3 {
                font-size: 20px;
                margin-bottom: 10px;
            }
        }
    </style>
</head>

<body>
    <header id="main-header">
        <nav>
            <a href="#home" class="nav-logo">חורבן הבית</a>
            <ul id="nav-menu">
                <li><a href="#home" class="active">ראשי</a></li>
                <li><a href="#about">למה סופרים?</a></li>
                <li><a href="#history">מבט היסטורי</a></li>
                <li><a href="#customs">אבל ותקווה</a></li>
                <li><a href="#embed" class="nav-cta-button">למפתחים</a></li>
            </ul>
            <button class="menu-toggle" id="menu-toggle" aria-label="פתח תפריט">
                <i class="fa fa-bars" aria-hidden="true"></i>
            </button>
        </nav>
    </header>
    <section id="home">
        <div class="rounded-box fade-in">
            <div id="temple-counter">
                <h2>זמן שחלף מאז חורבן בית המקדש</h2>
                <div class="time-unit" id="time-units-container"></div>
                <div class="button-container">
                    <button id="download-extension-btn">להורדת התוסף</button>
                    <button id="add-site-btn">הוספת המונה לאתר</button>
                </div>
            </div>
        </div>
    </section>

    <section id="about" class="content-section fade-in">
        <h3>למה אנחנו סופרים?</h3>
        <p>
            בית המקדש השני, מרכז החיים הרוחניים והלאומיים של העם היהודי, נחרב על ידי הרומאים בשנת 70 לספירה, בתשעה באב.
            מאז, יום זה הפך ליום אבל וצום לזכר החורבן. הספירה הזו אינה רק ציון זמן היסטורי, אלא תזכורת יומיומית לאובדן,
            לגלות ולכמיהה המתמדת לבניין ירושלים ובית המקדש. היא מסמלת את התקווה והציפייה לגאולה.
        </p>
    </section>

    <section id="history" class="content-section fade-in" style="background-color: #222;">
        <h3>מבט היסטורי: שני בתים, חורבן אחד</h3>
        <p>
            בית המקדש הראשון, שנבנה על ידי שלמה המלך, עמד על תילו כ-410 שנים והיווה את מרכזו הרוחני של עם ישראל. הוא
            נחרב בשנת 586 לפנה"ס על ידי נבוכדנצר מלך בבל. שבעים שנה לאחר מכן, שבי ציון, בהנהגת זרובבל, הניחו את היסודות
            לבית המקדש השני. בית זה, שהורחב ושופץ פאר על ידי הורדוס, עמד כ-420 שנים. הוא היה מוקד עלייה לרגל, לימוד תורה
            והקרבת קורבנות, עד לחורבנו הטרגי בשנת 70 לספירה על ידי טיטוס והלגיונות הרומיים.
        </p>
    </section>

    <section id="customs" class="content-section fade-in">
        <h3>מנהגי אבלות ותקווה לבניין</h3>
        <p>
            חורבן הבית הותיר חלל עמוק בעם היהודי, והוא מצוין באמצעות מנהגי אבלות לאורך השנה. שיאם הוא צום תשעה באב, היום
            בו נחרבו שני הבתים. ביום זה נוהגים לשבת על הרצפה, לקרוא את מגילת איכה וקינות, ולהימנע מתענוגות. לצד האבל,
            קיימת תמיד התקווה. שלוש פעמים ביום מתפללים יהודים על בניין ירושלים וחידוש עבודת המקדש. הספירה שבראש העמוד
            אינה רק זיכרון של מה שהיה, אלא ביטוי לציפייה היומיומית למה שעוד יהיה.
        </p>
    </section>


    <section id="embed" class="content-section fade-in" style="background-color: #222;">
        <h3>הוספת המונה לאתר שלך</h3>
        <p>רוצה להוסיף את ספירת הזמן לאתר שלך? זה פשוט מאוד. העתק את שורת הקוד הבאה והדבק אותה לפני תג הסגירה
            <code>&lt;/body&gt;</code> באתר שלך.
        </p>
        <div class="example-code">
            <pre><code class="code-content">&lt;script src="https://moshelavi.github.io/beit-amikdash/beit%20amikdash%20script/popup.js"&gt;&lt;/script&gt;</code></pre>
            <button class="copy-button" onclick="copyEmbedCode(this)" aria-label="העתק קוד">
                <i class="fa fa-copy" aria-hidden="true"></i>
            </button>
        </div>
        <p><strong>דוגמה לשימוש:</strong></p>
        <div class="example-code">
            <pre><code class="code-content">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;האתר שלי&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;!-- ...תוכן האתר שלך... --&gt;

    &lt;script src="https://moshelavi.github.io/beit-amikdash/beit%20amikdash%20script/popup.js"&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
            <button class="copy-button" onclick="copyEmbedCode(this)" aria-label="העתק קוד">
                <i class="fa fa-copy" aria-hidden="true"></i>
            </button>
        </div>
        <div class="social-share">
            <p>אהבתם את הפרויקט? שתפו אותו!</p>
            <a href="https://www.facebook.com/sharer/sharer.php?u=https://moshelavi.github.io/beit-amikdash/Landing%20page/"
                target="_blank" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
            <a href="https://twitter.com/intent/tweet?url=https://moshelavi.github.io/beit-amikdash/Landing%20page/&text=זמן שחלף מאז חורבן בית המקדש"
                target="_blank" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
            <a href="https://api.whatsapp.com/send?text=זמן שחלף מאז חורבן בית המקדש: https://moshelavi.github.io/beit-amikdash/Landing%20page/"
                target="_blank" aria-label="Share on WhatsApp"><i class="fa fa-whatsapp"></i></a>
        </div>
    </section>

    <footer>
        <p>&copy; <span id="copyright-year">2024</span> | פרויקט לזכר חורבן הבית. נוצר על ידי משה לוי (<a
                href="https://github.com/moshelavi/beit-amikdash" target="_blank" class="footer-link">קוד מקור</a>).</p>
    </footer>


    <script>
        function copyEmbedCode(button) {
            const codeElement = button.parentElement.querySelector('.code-content');
            const codeContent = codeElement.innerText || codeElement.textContent;
            const tempElem = document.createElement('textarea');
            tempElem.innerHTML = codeContent.trim();
            navigator.clipboard.writeText(tempElem.value).then(() => {
                const icon = button.querySelector('i');
                icon.classList.remove('fa-copy');
                icon.classList.add('fa-check');
                setTimeout(() => {
                    icon.classList.remove('fa-check');
                    icon.classList.add('fa-copy');
                }, 2000);
            }, (err) => {
                console.error('שגיאה בהעתקת הקוד: ', err);
            });
        }

        function scrollToEmbedCode() {
            document.getElementById('embed').scrollIntoView({ behavior: 'smooth' });
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('copyright-year').textContent = new Date().getFullYear();

            const menuToggle = document.getElementById('menu-toggle');
            const navMenu = document.getElementById('nav-menu');
            const navLinks = document.querySelectorAll('nav ul li a');
            const sections = document.querySelectorAll('section[id]');

            menuToggle.addEventListener('click', () => {
                navMenu.classList.toggle('active');
            });

            navMenu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    if (window.innerWidth <= 768) {
                        navMenu.classList.remove('active');
                    }
                });
            });

            function changeNavOnScroll() {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 90) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').substring(1) === current) {
                        link.classList.add('active');
                    }
                });
            }
            window.addEventListener('scroll', changeNavOnScroll);

            document.getElementById('add-site-btn')?.addEventListener('click', scrollToEmbedCode);
            (function counterLogic() {
                const DESTRUCTION_YEAR = 70;
                let elementsToUpdate = null;
                let previousTimes = { years: -1, days: -1 };

                function getTishaBAvGregorianDate(year) {
                    const hebrewYear = year + 3760;
                    const isHebrewLeap = (hYear) => ((hYear * 7) + 1) % 19 < 7;
                    const hebrewEpoch = 347997;
                    const daysInHebrewYear = (hYear) => elapsedDays(hYear + 1) - elapsedDays(hYear);
                    const elapsedDays = (hYear) => {
                        const months = Math.floor(((235 * hYear) - 234) / 19);
                        const parts = 12084 + (13753 * months);
                        let day = (months * 29) + Math.floor(parts / 25920);
                        const dayOfWeek = day % 7;
                        if (dayOfWeek === 2 || dayOfWeek === 4 || dayOfWeek === 6) { day++; }
                        else if (dayOfWeek === 1 && (parts % 25920) >= 19440 && !isHebrewLeap(hYear)) { day += 2; }
                        else if (dayOfWeek === 0 && (parts % 25920) >= 13676 && isHebrewLeap(hYear - 1)) { day++; }
                        return day;
                    };
                    const fromJD = (jd) => {
                        const z = Math.floor(jd + 0.5);
                        const a = Math.floor((z - 1867216.25) / 36524.25);
                        const b = z + 1 + a - Math.floor(a / 4);
                        const c = b + 1524;
                        const d = Math.floor((c - 122.1) / 365.25);
                        const e = Math.floor(365.25 * d);
                        const f = Math.floor((c - e) / 30.6001);
                        const day = c - e - Math.floor(30.6001 * f);
                        const month = f - (f > 13 ? 13 : 1);
                        const gYear = d - (month > 2 ? 4716 : 4715);
                        return new Date(Date.UTC(gYear, month - 1, day));
                    };
                    const yearDays = daysInHebrewYear(hebrewYear);
                    let daysFromTishrei1 = (isHebrewLeap(hebrewYear) ? 238 : 209) + (yearDays % 10 === 5 ? 2 : (yearDays % 10 === 4 ? 1 : 0));
                    const tishaBAvJd = hebrewEpoch + elapsedDays(hebrewYear) + daysFromTishrei1;
                    const date = fromJD(tishaBAvJd);
                    if (date.getUTCDay() === 6) { date.setUTCDate(date.getUTCDate() + 1); }
                    return date;
                }

                function createCounterDOM() {
                    const timeUnitsContainer = document.getElementById('time-units-container');
                    if (!timeUnitsContainer) return { container: null };
                    timeUnitsContainer.innerHTML = '';
                    timeUnitsContainer.setAttribute('aria-live', 'polite');
                    const elements = { yearValueContainer: null, dayValueContainer: null, container: timeUnitsContainer };
                    const TIME_UNITS_META = [{ key: 'years', title: 'שנים' }, { key: 'days', title: 'ימים' }];
                    TIME_UNITS_META.forEach((meta, index) => {
                        const unitContainer = document.createElement('div');
                        unitContainer.classList.add('unit');
                        const valueContainer = document.createElement('div');
                        valueContainer.classList.add('unit-value-container');
                        if (meta.key === 'years') { elements.yearValueContainer = valueContainer; }
                        else { elements.dayValueContainer = valueContainer; }
                        unitContainer.appendChild(valueContainer);
                        const titleElement = document.createElement('div');
                        titleElement.classList.add('unit-title');
                        titleElement.textContent = meta.title;
                        unitContainer.appendChild(titleElement);
                        timeUnitsContainer.appendChild(unitContainer);
                        if (index < TIME_UNITS_META.length - 1) {
                            const colonElement = document.createElement('div');
                            colonElement.classList.add('colon');
                            colonElement.innerHTML = '&#58;';
                            colonElement.setAttribute('aria-hidden', 'true');
                            timeUnitsContainer.appendChild(colonElement);
                        }
                    });
                    return elements;
                }

                function updateDigit(reelElement, newDigit) {
                    const digitAsNumber = parseInt(newDigit, 10);
                    if (isNaN(digitAsNumber)) return;
                    reelElement.style.setProperty('--digit', digitAsNumber);
                }

                function createDigitReel() {
                    const numberContainer = document.createElement('div');
                    numberContainer.classList.add('unit-value');
                    const reelElement = document.createElement('div');
                    reelElement.classList.add('digit-reel');
                    for (let j = 0; j <= 9; j++) {
                        const digitSpan = document.createElement('span');
                        digitSpan.textContent = j;
                        reelElement.appendChild(digitSpan);
                    }
                    numberContainer.appendChild(reelElement);
                    return numberContainer;
                }

                function syncUnit(container, valueStr) {
                    const currentDigits = container.children.length;
                    const requiredDigits = valueStr.length || 1;
                    const valueToDisplay = valueStr || '0';
                    const structureChanged = currentDigits !== requiredDigits;
                    if (requiredDigits > currentDigits) {
                        for (let i = 0; i < requiredDigits - currentDigits; i++) { container.appendChild(createDigitReel()); }
                    } else if (requiredDigits < currentDigits) {
                        for (let i = 0; i < currentDigits - requiredDigits; i++) { container.removeChild(container.firstChild); }
                    }
                    const updateValues = () => {
                        const reelElements = Array.from(container.children).map(child => child.querySelector('.digit-reel'));
                        valueToDisplay.split('').forEach((char, i) => {
                            if (reelElements[i]) { updateDigit(reelElements[i], char); }
                        });
                    };
                    if (structureChanged || previousTimes.years === -1) {
                        setTimeout(updateValues, 20);
                    } else {
                        updateValues();
                    }
                }

                function updateCounterDisplay(elements, times) {
                    if (times.years === previousTimes.years && times.days === previousTimes.days) { return; }
                    const yearStr = times.years.toString();
                    const dayStr = times.days.toString();
                    syncUnit(elements.yearValueContainer, yearStr);
                    syncUnit(elements.dayValueContainer, dayStr);
                    elements.container.setAttribute('aria-label', `${times.years} שנים ו-${times.days} ימים`);
                    previousTimes = times;
                }

                function runCounter() {
                    const today = new Date();
                    today.setHours(0, 0, 0, 0);
                    const currentYear = today.getFullYear();
                    const tishaBAvThisYear = getTishaBAvGregorianDate(currentYear);
                    let lastTishaBAv;
                    let yearsSinceDestruction = currentYear - DESTRUCTION_YEAR;
                    if (today < tishaBAvThisYear) {
                        lastTishaBAv = getTishaBAvGregorianDate(currentYear - 1);
                        yearsSinceDestruction -= 1;
                    } else {
                        lastTishaBAv = tishaBAvThisYear;
                    }
                    const timeDiff = today - lastTishaBAv;
                    const daysSinceLastTishaBAv = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                    const times = { years: yearsSinceDestruction, days: daysSinceLastTishaBAv };
                    updateCounterDisplay(elementsToUpdate, times);
                }

                elementsToUpdate = createCounterDOM();
                if (elementsToUpdate.container) {
                    runCounter();
                }
            })();
        });
    </script>
</body>

</html>
